## åˆ†ç±»

æŒ‰ç…§æˆ‘çš„ä¸ªäººç†è§£ï¼Œæ»šåŠ¨åˆ†`å…¨å±€æ»šåŠ¨(æµè§ˆå™¨çª—å£)`è·Ÿ`å±€éƒ¨æ»šåŠ¨(è‡ªå®šä¹‰çš„ç›’å­)`ï¼Œä»¥ä¸‹å†…å®¹ç»å¤§éƒ¨åˆ†éƒ½æ˜¯æŒ‡`å…¨å±€æ»šåŠ¨`ï¼Œ`å±€éƒ¨æ»šåŠ¨`çš„è¯è·å–`æŒ‡å®šçš„DOM`å†è°ƒç”¨`ç›¸åº”çš„API`å³å¯âœ…

## å¦‚ä½•è®¾ç½®å…¨å±€æ»šåŠ¨æ¡é«˜åº¦

1.  æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼š

```js
window.scrollTo(0, 0);
// or
window.scrollTo({
  left: 0,
  top: 100
});
å¤åˆ¶ä»£ç 
```

2.  ä¹Ÿå¯ä»¥åˆ©ç”¨`ç›¸å¯¹æ»šåŠ¨`è®¾ç½®ï¼š

```js
window.scrollBy(0, 0);
// or
window.scrollBy({
  left: 0,
  top: 100
});
å¤åˆ¶ä»£ç 
```

3.  æˆ–è€…åˆ©ç”¨`scrollTop`è®¾ç½®ï¼š

```js
document.scrollingElement.scrollTop = 100;
å¤åˆ¶ä»£ç 
```

æ³¨æ„ï¼š`scrollTo`è·Ÿ`scrollBy`çš„å‚æ•°æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«å°±æ˜¯`scrollBy`æ»šåŠ¨è·ç¦»æ˜¯ç›¸å¯¹ä¸å½“å‰æ»šåŠ¨æ¡ä½ç½®è¿›è¡Œæ»šåŠ¨âœ…

æ•ˆæœå¯¹æ¯”å¦‚ä¸‹ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/01da03da71874991a1a2b28aea9f19cf~tplv-k3u1fbpfcp-zoom-1.image) ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cab1d6a367fb4e70aace42b971fd45c2~tplv-k3u1fbpfcp-zoom-1.image)

å¾ˆæ˜æ˜¾ï¼Œ`å‰è€…`å°±æ˜¯æŠŠæ»šåŠ¨é«˜åº¦è®¾ç½®æˆ`100`ï¼Œè€Œ`åè€…`æ˜¯æ¯æ¬¡éƒ½å¢åŠ `100`ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç§°ä¹‹ä¸º`ç›¸å¯¹æ»šåŠ¨`äº†âœ…

## å¦‚ä½•æŒ‡å®šä¸€ä¸ªå…ƒç´ æ˜¾ç¤ºåœ¨è§†çª—

1.  æœ€å¸¸ç”¨çš„æ–¹æ³•ï¼š

```js
// è·å–å…ƒç´ çš„offsetTop(å…ƒç´ è·ç¦»æ–‡æ¡£é¡¶éƒ¨çš„è·ç¦»)
let offsetTop = document.querySelector(".box").offsetTop;
// è®¾ç½®æ»šåŠ¨æ¡çš„é«˜åº¦
window.scrollTo(0, offsetTop);
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

2.  æˆ–è€…ç”¨é”šç‚¹ï¼š

```js
<a href="#box">ç›’å­å‡ºç°åœ¨é¡¶éƒ¨</a>
<div id="box"></div>
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

3.  æˆ–è€…åˆ©ç”¨`scrollIntoView`è¿›è¡Œå±•ç°ï¼š

```js
document.querySelector(".box").scrollIntoView();
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

è¿˜å¯ä»¥æŒ‡å®šå…ƒç´ çš„å‡ºç°ä½ç½®ï¼š

```js
// startå‡ºç°åœ¨è§†å£é¡¶éƒ¨ã€centerå‡ºç°åœ¨è§†å£ä¸­å¤®ã€endå‡ºç°åœ¨è§†å£åº•éƒ¨
document.querySelector(".box").scrollIntoView({
  block: "start" || "center" || "end"
});
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

## å¦‚ä½•è®¾ç½®æ»šåŠ¨å…·æœ‰å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœ

1.  åˆ©ç”¨æ¯ä¸ªæ–¹æ³•çš„`å‚æ•°`è®¾ç½®ï¼š

```js
window.scrollTo({
  behavior: "smooth"
});
window.scrollBy({
  behavior: "smooth"
});
document.querySelector(".box").scrollIntoView({
  behavior: "smooth"
});
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

2.  æˆ–è€…ç”¨`css`å±æ€§è®¾ç½®ï¼š

```js
html {
  scroll-behavior: smooth; // å…¨å±€æ»šåŠ¨å…·æœ‰å¹³æ»‘æ•ˆæœ
}
// æˆ–è€…æ‰€æœ‰
* {
 scroll-behavior: smooth;
}
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

æ³¨æ„ï¼šè®¾ç½®äº†è¯¥å±æ€§ä¹‹åï¼Œæ‰€æœ‰æ–¹æ³•éƒ½å¯ä»¥ä¸ç”¨è®¾ç½®`behavior`å‚æ•°äº†ï¼ŒäºŒé€‰ä¸€å³å¯ï¼Œå› ä¸ºéƒ½æ˜¯`æ§åˆ¶å½“å‰æŒ‡å®šå…ƒç´ çš„æ»šåŠ¨è¡Œä¸º`ï¼Œæ‰€ä»¥é”šç‚¹è·³è½¬ã€è®¾ç½®`scrollTop`ä¹Ÿå…·æœ‰å¹³æ»‘(`smooth`)çš„`æ»šåŠ¨è¡Œä¸º`âœ…

## ä¸€äº›æœ‰è¶£çš„ä¸œè¥¿

#### 1. scrollingElement

è¯¥å¯¹è±¡å¯ä»¥éå¸¸`å…¼å®¹`åœ°è·å–`scrollTop`ã€`scrollHeight`ç­‰å±æ€§ï¼Œåœ¨`ç§»åŠ¨ç«¯`è·Ÿ`PCç«¯`éƒ½å±¡è¯•ä¸çˆ½ğŸ¤

è¿˜è®°å¾—å½“åˆå†™è¿™ä¸ªå…¼å®¹æ€§æ–¹æ³•ï¼š

```js
let scrollHeight = document.documentElement.scrollHeight || document.body.scrollHeight;
å¤åˆ¶ä»£ç 
```

ç°åœ¨ä½ åªéœ€è¦ï¼š

```js
let scrollHeight = document.scrollingElement.scrollHeight;
å¤åˆ¶ä»£ç 
```

å› ä¸ºåœ¨`MDN`ä¸­æ˜¯è¿™æ ·ä»‹ç»å®ƒçš„ï¼š

æ ‡å‡†æ¨¡å¼è¿”å›`documentElement`ï¼Œæ€ªå¼‚æ¨¡å¼è¿”å›`body`ï¼›

#### 2. æ»šåŠ¨åˆ°åº•éƒ¨

```js
window.scrollTo({
  left: 0,
  top: document.scrollingElement.scrollHeight
});
// å¦‚æœä½ å®åœ¨æ˜¯æ‡’çš„è¯...
window.scrollTo(0, 999999);
å¤åˆ¶ä»£ç 
```

æ³¨æ„ï¼šå¹³æ»‘æ»šåŠ¨åˆ°`é¡¶éƒ¨`æˆ–è€…`åº•éƒ¨`è‡ªå·±åŠ å‚æ•°æˆ–è€…å±æ€§å³å¯âœ…

#### 3. åˆ¤æ–­æµè§ˆå™¨å·²æ»šåŠ¨åˆ°åº•éƒ¨

```js
window.addEventListener("scroll", () => {
  let {
    scrollTop,
    scrollHeight,
    clientHeight
  } = document.scrollingElement;

  // å½“å‰æ»šåŠ¨é«˜åº¦ + è§†å£é«˜åº¦ >= æ–‡æ¡£æ€»é«˜åº¦
  if (scrollTop + clientHeight >= scrollHeight) {
    console.log("å·²åˆ°è¾¾åº•éƒ¨");
  }
});
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

#### å‡½æ•°èŠ‚æµ

å½“ä½ æ²¡åŠ å‡½æ•°èŠ‚æµï¼š

```js
window.addEventListener("scroll", () => console.log("æˆ‘åœ¨æ»šæˆ‘åœ¨æ»šï¼"));
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

å½“ä½ åŠ äº†å‡½æ•°èŠ‚æµä¹‹åï¼š

```js
window.addEventListener("scroll", throttle(() => console.log("æˆ‘åœ¨æ»šæˆ‘åœ¨æ»šï¼")));
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

`throttle`æºç ï¼š

```js
function throttle(fn, interval = 500) {
  let run = true;
  return function () {
    if (!run) return;
    run = false;
    setTimeout(() => {
      fn.apply(this, arguments);
      run = true;
    }, interval);
  };
}
å¤åˆ¶ä»£ç 
```

ç”¨å¤„ï¼šå‡å°‘ä»£ç æ‰§è¡Œé¢‘ç‡âœ…

#### å‡½æ•°é˜²æŠ–

å½“ä½ åŠ äº†å‡½æ•°é˜²æŠ–ä¹‹åï¼š

```js
window.addEventListener("scroll", debounce(() => console.log("æ»šåŠ¨ç»“æŸï¼")));
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

`debounce`æºç ï¼š

```
function debounce(fn, interval = 500) {
  let timeout = null;
  return function () {
    clearTimeout(timeout);
    timeout = setTimeout(() => {
      fn.apply(this, arguments);
    }, interval);
  };
}
å¤åˆ¶ä»£ç 
```

ç”¨å¤„ï¼šåˆ¤æ–­æŸä¸ª`åŠ¨ä½œç»“æŸ`ï¼Œå¦‚åˆšåˆšçš„æ»šåŠ¨ç»“æŸã€inputè¾“å…¥ç»“æŸç­‰âœ…

#### è§£å†³IOSè®¾å¤‡å±€éƒ¨æ»šåŠ¨ä¸é¡ºç•…(ç²˜æ‰‹)

é™¤äº†æµè§ˆå™¨åŸç”Ÿæ»šåŠ¨ï¼Œ`è‡ªå®šä¹‰çš„æ»šåŠ¨æ¡`éƒ½ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼ŒåŠ ä»¥ä¸‹å±æ€§å°±å¯ä»¥è§£å†³ï¼š

```js
.box {
  -webkit-overflow-scrolling: touch;
}
å¤åˆ¶ä»£ç 
```

å¯¹æ¯”å¦‚ä¸‹ï¼š

æ³¨æ„ï¼šè¦çœŸæœºæ‰èƒ½çœ‹åˆ°æ•ˆæœï¼Œè¿™é‡ŒæŒ‡çš„`å±€éƒ¨æ»šåŠ¨`æ˜¯æŒ‡`è‡ªå·±å®šä¹‰çš„ç›’å­`ï¼Œç„¶åè®¾ç½®`overflow: auto || scroll;`åçš„æ»šåŠ¨è¡Œä¸ºï¼›

#### æ»šåŠ¨ä¼ æ’­

æŒ‡æœ‰å¤šä¸ª`æ»šåŠ¨åŒºåŸŸ`ï¼Œå½“ä¸€ä¸ª`æ»šåŠ¨åŒºåŸŸ`æ»šåŠ¨å®Œä¹‹åï¼Œç»§ç»­æ»šåŠ¨ä¼š`ä¼ æ’­åˆ°`åˆ°çˆ¶åŒºåŸŸç»§ç»­æ»šåŠ¨çš„è¡Œä¸ºï¼š

```js
.box {
  overscroll-behavior: contain; // é˜»æ­¢æ»šåŠ¨ä¼ æ’­
}
å¤åˆ¶ä»£ç 
```

å¯¹æ¯”æ•ˆæœå›¾å¦‚ä¸‹ï¼š

#### æ¨ªå‘æ»šåŠ¨

`ç§»åŠ¨ç«¯`é‡åˆ°æ­¤éœ€æ±‚æ¯”è¾ƒå¤šï¼Œå¸¸ç”¨äºå›¾ç‰‡å±•ç¤ºï¼š

```js
<ul>
  <li>
    <img src="">
  </li>
  // ...
</ul>
ul {
  white-space: nowrap; // è¶…å‡ºä¸æ¢è¡Œ
  overflow-x: auto;
  li {
    display: inline-block;
    img {
      display: block;
      width: 200px;
    }
  }
}
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

#### æ»šåŠ¨ç»“æŸåï¼Œå¼ºåˆ¶æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ 

åŸºäºä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬è®¾ç½®å¦‚ä¸‹å±æ€§ï¼š

```js
ul {
  scroll-snap-type: x mandatory;

  li {
    scroll-snap-align: start;
  }
}
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

ä»”ç»†çœ‹ä¼šå‘ç°ï¼Œæˆ‘ä»¬æ¾æ‰‹çš„æ—¶å€™ï¼Œä¼šå°†`æœ€è¿‘çš„å…ƒç´ `æ»šåŠ¨åˆ°æœ€å³è¾¹ï¼ˆåˆå§‹ä½ç½®ï¼Œå¯¹äºYè½´æ¥è®²å°±æ˜¯é¡¶éƒ¨ï¼ŒXè½´åˆ™æ˜¯å³è¾¹ï¼‰

ä¹Ÿå¯ä»¥è®¾ç½®å‡ºç°åœ¨ä¸­é—´ï¼š

```js
li {
  scroll-snap-align: center;
}
å¤åˆ¶ä»£ç 
```

æ•ˆæœå¦‚ä¸‹ï¼š

è¿™æ ·ï¼Œä¸€ä¸ªç®€æ˜“çš„`è½®æ’­å›¾`æ•ˆæœå°±å‡ºæ¥å•¦ï¼

è¿˜å¯ä»¥å®ç°å…¨å±æ»šåŠ¨ï¼š

![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c47bb1a5f574dcba1951acd40671e02~tplv-k3u1fbpfcp-zoom-1.image)

æ³¨æ„ï¼šè¯¥å±æ€§ä¼šåœ¨ä½ `æ»šåŠ¨å®Œ`ä¹‹åå†åšå¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥ä¸€ä¸‹å­ä»`å›¾ç‰‡1`è·³åˆ°`å›¾ç‰‡9`âœ…

## æœ€å

ä»¥ä¸Šæ¶‰åŠåˆ°çš„`æ–¹æ³•æˆ–å±æ€§`æ–‡æ¡£å¦‚ä¸‹ï¼š

1.  [scrollTo](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/scrollTo)
1.  [scrollBy](https://developer.mozilla.org/zh-CN/docs/Web/API/Window/scrollBy)
1.  [scrollIntoView](https://developer.mozilla.org/zh-CN/docs/Web/API/Element/scrollIntoView)
1.  [scrollingElement](https://developer.mozilla.org/zh-CN/docs/Web/API/Document/scrollingElement)
1.  [scroll-behavior](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-behavior)
1.  [-webkit-overflow-scrolling](https://developer.mozilla.org/zh-CN/docs/Web/CSS/-webkit-overflow-scrolling)
1.  [overscroll-behavior](https://developer.mozilla.org/zh-CN/docs/Web/CSS/overscroll-behavior)
1.  [scroll-snap-type](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-snap-type)
1.  [scroll-snap-align](https://developer.mozilla.org/zh-CN/docs/Web/CSS/scroll-snap-align)

é“¾æ¥ï¼š<https://juejin.im/post/5d75adfbe51d4561e84fcc9c>